<ion-header>
  <ion-toolbar>
    <i class="ic ic-action ion-margin-start" slot="start" (click)="goBack()">arrow_back</i>
    <ion-title>
      <label class="ion-text-capitalize" *ngIf="patient">Add Visit for {{ patient.firstName }} {{ patient.lastName }}</label>
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
    <ion-input class="ion-margin-top" label="Complaint" label-placement="floating" placeholder="Complaint" fill="outline"
      [(ngModel)]="history.complaints"></ion-input>
    <ion-input class="ion-margin-top" label="Treatment" labelPlacement="floating" placeholder="Treatment" fill="outline"
      [(ngModel)]="history.treatment"></ion-input>
    <ion-input class="ion-margin-top" label="Investigation" labelPlacement="floating" placeholder="Investigation" fill="outline"
    [(ngModel)]="history.investigation"></ion-input>
  <ion-grid class="extra-fields-container">
    <ion-row>
      <ion-col size="6" *ngFor="let ef of extraFields">
          <ion-input [label]="ef.fieldName" [type]="ef.fieldType" labelPlacement="floating" fill="outline"
          [placeholder]="ef.fieldName" [(ngModel)]="ef.fieldValue"></ion-input>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid >
    <ion-row>
      <ion-col size="4">
          <ion-input label="Fees" type="number" labelPlacement="floating" fill="outline" 
          placeholder="Fees" [(ngModel)]="history.fees"(input)="onFeeChange()"></ion-input>
      </ion-col>
      <ion-col size="4" class="ion-text-center">
        <ion-toggle labelPlacement="stacked" [(ngModel)]="history.feesPaid" (ionChange)="onFeePaidChange()">Fee Paid</ion-toggle>
      </ion-col>
      <ion-col size="4">
          <ion-input label="Amount paid"  type="number" labelPlacement="floating" fill="outline"
          placeholder="Paid" [(ngModel)]="history.amountPaid" [disabled]="!history.feesPaid"></ion-input>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-button class="form-button" (click)="addHistory()">Save</ion-button>
  <ion-button fill="clear" class="form-button" (click)="clearForm()">Clear</ion-button>
</ion-content>